# household-management

[![build](https://github.com/TakuyaFukumura/household-management/actions/workflows/build.yml/badge.svg)](https://github.com/TakuyaFukumura/household-management/actions/workflows/build.yml?query=branch:main)

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

Spring Boot ã‚’ä½¿ç”¨ã—ãŸå®¶è¨ˆç®¡ç†ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚æ—¥ã€…ã®æ”¯å‡ºè¨˜éŒ²ã¨äºˆç®—ç®¡ç†ã‚’è¡Œã„ã€å®¶è¨ˆã®å¯è¦–åŒ–ã¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚

## ä¸»ãªæ©Ÿèƒ½

### ğŸ“Š æ”¯å‡ºç®¡ç†
- æ—¥ä»˜ã€ã‚«ãƒ†ã‚´ãƒªã€é‡‘é¡ã€èª¬æ˜ã«ã‚ˆã‚‹æ”¯å‡ºè¨˜éŒ²
- å¹´æœˆã§ã®æ”¯å‡ºå±¥æ­´è¡¨ç¤º
- æ”¯å‡ºãƒ‡ãƒ¼ã‚¿ã®ç·¨é›†ãƒ»å‰Šé™¤
- ã‚«ãƒ†ã‚´ãƒªåˆ¥æ”¯å‡ºã®å¯è¦–åŒ–ï¼ˆãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤ºï¼‰

### ğŸ’° äºˆç®—ç®¡ç†  
- ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®æœˆé–“äºˆç®—ç›®æ¨™è¨­å®š
- äºˆç®—ã¨å®Ÿæ”¯å‡ºã®æ¯”è¼ƒ
- äºˆç®—ãƒ‡ãƒ¼ã‚¿ã®ç·¨é›†ãƒ»å‰Šé™¤
- äºˆç®—æ§‹æˆã®å¯è¦–åŒ–ï¼ˆãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤ºï¼‰

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Spring Boot 3.5.3
- **Java ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: Java 17
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: H2 Databaseï¼ˆçµ„ã¿è¾¼ã¿ï¼‰
- **ORM**: Spring Data JPA / Hibernate
- **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³**: Thymeleaf
- **ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«**: Maven
- **ãã®ä»–**: Lombok

## å‰ææ¡ä»¶

- Java 17 ä»¥ä¸Š
- Mavenï¼ˆMaven Wrapper ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸è¦ï¼‰

## é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³
```bash
git clone https://github.com/TakuyaFukumura/household-management.git
```
```bash
cd household-management
```

### ä¾å­˜é–¢ä¿‚ã®è§£æ±ºã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
```bash
./mvnw clean compile
```

## å®Ÿè¡Œæ–¹æ³•

### é–‹ç™ºç’°å¢ƒã§ã®èµ·å‹•
```bash
./mvnw spring-boot:run
```

### å®Ÿè¡Œå¯èƒ½ JAR ã®ä½œæˆã¨å®Ÿè¡Œ
- JAR ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
```bash
./mvnw clean package
```
- JAR ãƒ•ã‚¡ã‚¤ãƒ«ã®å®Ÿè¡Œ
```bash
java -jar ./target/*.jar
```

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒèµ·å‹•ã—ãŸã‚‰ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:8080 ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ã€‚

## ãƒ†ã‚¹ãƒˆ

### ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ
```bash
./mvnw test
```

## Docker ã§ã®é–‹ç™ºç’°å¢ƒ

### å‰ææ¡ä»¶

- Docker
- Docker Compose

### Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰ã¨èµ·å‹•

Dockerå†…ã§å®Œå…¨ã«ãƒ“ãƒ«ãƒ‰ã‹ã‚‰å®Ÿè¡Œã¾ã§è¡Œã„ã¾ã™ã€‚Javaã‚„Mavenã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ã€‚

- Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰
```bash
docker build -t household-management .
```
- ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•
```bash
docker run -p 8080:8080 -v $(pwd)/h2db:/app/h2db household-management
```

### Docker Compose ã‚’ä½¿ç”¨ã—ãŸèµ·å‹•

- ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§èµ·å‹•
```bash
docker compose up -d --build
```

- ãƒ­ã‚°ã‚’ç¢ºèª
```bash
docker compose logs -f
```

- åœæ­¢
```bash
docker compose down
```

### ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒèµ·å‹•ã—ãŸã‚‰ã€ä»¥ä¸‹ã® URL ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ï¼š

- **ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**: http://localhost:8080
- **H2 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚³ãƒ³ã‚½ãƒ¼ãƒ«**: http://localhost:8080/h2-console/

### ãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šåŒ–

Docker Compose ä½¿ç”¨æ™‚ã€H2 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã¯ `./h2db` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã€ã‚³ãƒ³ãƒ†ãƒŠã‚’å‰Šé™¤ã—ã¦ã‚‚ãƒ‡ãƒ¼ã‚¿ãŒä¿æŒã•ã‚Œã¾ã™ã€‚

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### ãƒãƒ¼ãƒˆãŒä½¿ç”¨ä¸­ã®å ´åˆ
- ä½¿ç”¨ä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¢ºèª
```bash
lsof -i :8080
```

- docker-compose.yml ã§ãƒãƒ¼ãƒˆã‚’å¤‰æ›´
```yaml
ports:
  - "8081:8080"  # ãƒ›ã‚¹ãƒˆãƒãƒ¼ãƒˆ8081ã«ãƒãƒƒãƒ”ãƒ³ã‚°
```

#### ã‚³ãƒ³ãƒ†ãƒŠã®ãƒªãƒ“ãƒ«ãƒ‰
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä½¿ã‚ãšã«ãƒªãƒ“ãƒ«ãƒ‰
```bash
docker compose build --no-cache
```

- ã¾ãŸã¯ docker-compose ã‚’ä½¿ç”¨
```bash
docker-compose build --no-cache
```

- ä¸è¦ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å‰Šé™¤
```bash
docker system prune
```

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

### H2 Database
æœ¬ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ H2 ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚

#### H2 ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
H2 ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã¯æ—¢å®šã§æœ‰åŠ¹ã«ãªã£ã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã® URL ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã™ï¼š

http://localhost:8080/h2-console/

H2 ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ç„¡åŠ¹ã«ã™ã‚‹å ´åˆã¯ã€`application.properties` ã§ä»¥ä¸‹ã‚’è¨­å®šã—ã¦ãã ã•ã„ï¼š
```properties
spring.h2.console.enabled=false
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
src/
â”œâ”€â”€ main/
â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â””â”€â”€ com/example/
â”‚   â”‚       â”œâ”€â”€ Main.java                 # ãƒ¡ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹
â”‚   â”‚       â”œâ”€â”€ controller/               # Web ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©
â”‚   â”‚       â”‚   â”œâ”€â”€ ChartDataController.java
â”‚   â”‚       â”‚   â”œâ”€â”€ HouseholdBudgetController.java
â”‚   â”‚       â”‚   â””â”€â”€ HouseholdExpenseController.java
â”‚   â”‚       â”œâ”€â”€ dto/                      # ãƒ‡ãƒ¼ã‚¿è»¢é€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â”‚   â”‚       â”œâ”€â”€ entity/                   # ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚¯ãƒ©ã‚¹
â”‚   â”‚       â”‚   â”œâ”€â”€ HouseholdBudget.java
â”‚   â”‚       â”‚   â””â”€â”€ HouseholdExpense.java
â”‚   â”‚       â”œâ”€â”€ repository/               # ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤
â”‚   â”‚       â””â”€â”€ service/                  # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤
â”‚   â””â”€â”€ resources/
â”‚       â”œâ”€â”€ application.properties        # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
â”‚       â”œâ”€â”€ data.sql                      # åˆæœŸãƒ‡ãƒ¼ã‚¿
â”‚       â””â”€â”€ templates/                    # Thymeleaf ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚           â”œâ”€â”€ budget/                   # äºˆç®—ç®¡ç†ç”»é¢
â”‚           â”œâ”€â”€ expenses/                 # æ”¯å‡ºç®¡ç†ç”»é¢
â”‚           â””â”€â”€ fragments/                # å…±é€šéƒ¨å“
â””â”€â”€ test/                                 # ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
```

## ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ

### æ”¯å‡ºä¸€è¦§ç”»é¢
æº–å‚™ä¸­

### äºˆç®—ä¸€è¦§ç”»é¢  
æº–å‚™ä¸­
